(function(a,k){a.module("app.libs",[])})(window.angular);(function(a,k,l,g){a.module("app.libs").factory("Velocity",function(){return k||l.fn.velocity})})(window.angular,window.Velocity,window.jQuery);(function(a,k){a.module("app","app.core app.libs app.directives app.models app.services app.filters app.storage app.levantamentos app.auth app.layout".split(" "))})(window.angular);(function(a,k){a.module("app.core","ngAnimate ngAria ngMessages ngLocale ngResource ngSanitize encrypt blocks.logger blocks.exception ui.router ui.bootstrap LocalStorageModule".split(" "))})(window.angular);(function(a,k){function l(d,c){return{request:function(e){var b=c.get("User");0===e.url.indexOf(d)&&(e.params.token=b.getToken(),console.log(e));return e}}}function g(d,c,e,b){var n=0;return{request:function(b){0===b.url.indexOf(d)&&(n++,e.$broadcast("loader:show"));return b||c.when(b)},response:function(b){0===b.config.url.indexOf(d)&&0===--n&&e.$broadcast("loader:hide");return b||c.when(b)},responseError:function(b){0===b.config.url.indexOf(d)&&0===--n&&e.$broadcast("loader:hide");return c.reject(b)}}}
var f=a.module("app.core");f.config(["$httpProvider",function(d){d.interceptors.push(l,g)}]);l.$inject=["dbUrl","$injector"];g.$inject=["dbUrl","$q","$rootScope","$injector"];f.config(["$animateProvider",function(d){d.classNameFilter(/animate-options/)}]);f.run(["$rootScope","$state","$stateParams","logger",function(d,c,e,b){d.$on("$stateChangeStart",function(c,e){b.info("routing to "+e.url,null,"config.js: stateChangeStart")});d.$on("$stateChangeSuccess",function(c,e){b.success("routing to "+e.url,
null,"config.js: stateChangeSuccess")});d.$on("$stateChangeError",function(c,e,d,f,a,l){b.error("routing to "+e.url,null,"config.js: stateChangeError");b.error("error "+l,null,"config.js: stateChangeError")})}])})(window.angular);(function(a,k){a.module("app.core").value("dbUrl","https://fatoresweb.azurewebsites.net/api/v1/")})(window.angular);(function(a,k){a.module("app.core").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,g,f){function d(){return{templateUrl:"scripts/partials/toolbar.html",controller:"toolbarController",controllerAs:"toolbar"}}g.otherwise("/");a.state("login",{url:"/",auth:!1,views:{content:{templateUrl:"scripts/auth/login.html",controller:"Login as vm"}},resolve:{wakeup:["$q","dataservice",function(c,e){var b=c.defer();e.get({item:"token",username:"wake",password:""},1)["finally"](function(){b.resolve()});
return b.promise}]}}).state("configuracao",{url:"/configuracao",auth:!0,data:{toolbar:{pageTitle:"Configura\u00e7\u00e3o"},footer:{buttons:{ok:{title:"Confirmar",toState:"equipe"}}}},views:{content:{templateUrl:"scripts/layout/configuracao.html",controller:"Configuracao as vm",resolve:{dados:["ConfigurationService",function(c){return c.get()}],session:["$q","Sessions",function(c,e){var b=c.defer();b.resolve(e.current());return b.promise}]}},toolbar:d()}}).state("equipe",{url:"/equipe",auth:!0,data:{toolbar:{pageTitle:"Equipe"},
footer:{buttons:{ok:{title:"Confirmar",toState:"equipe"}}}},views:{content:{templateUrl:"scripts/layout/equipe.html",controller:"equipeController as equipe",resolve:{funcoes:["Entidades","ConfigurationService","sortBrFilter",function(c,e,b){e=e.select("Tarefa");return b(c.get("funcao",e.Funcoes),"Nome")}]}},toolbar:d(),"footer@equipe":{templateUrl:"scripts/partials/footer.html",controller:"footerController",controllerAs:"footer"}}}).state("recursos",{url:"/recursos",auth:!0,data:{toolbar:{pageTitle:"Recursos"}},
views:{content:{templateUrl:"scripts/layout/recursos.html",controller:"recursosController as recursos"},toolbar:d()}}).state("comentarios",{url:"/comentarios",auth:!0,data:{toolbar:{pageTitle:"Comentarios"}},views:{content:{templateUrl:"scripts/layout/comentarios.html",controller:"comentariosController as comentarios"},toolbar:d()}}).state("atividades",{url:"/atividades",auth:!0,data:{toolbar:{pageTitle:"Atividades"}},views:{content:{templateUrl:"scripts/layout/atividades.html",controller:"atividadesController as atividades"},
toolbar:d()}}).state("credits",{url:"/credits",templateUrl:"credits.html",data:{pageTitle:"Credits"}}).state("estudo",{url:"/estudo",templateUrl:"estudo.html"})}]).run(["$rootScope","$state","$stateParams","authservice",function(a,g,f,d){a.$on("$stateChangeStart",function(c,e,b){console.log(e);return e.auth&&!d.isLogged()?(c.preventDefault(),g.go("login")):!0})}])})(window.angular);(function(a,k){a.module("app.core").factory("common",["$q","$state","logger",function(a,g,f){return{routes:{to:function(d){f.info("Going to "+d,null,"common.js: Route");g.go(d)}},promise:a}}])})(window.angular);(function(a,k){function l(l,f,d,c,e){function b(b,e,f){var l=b,g=e,t=f;"number"===typeof e&&(t=e,g={});"object"===typeof b&&b.item&&(l=b.item,delete b.item,g=b);var u=n(l,g||{}),k=d(function(){c.error("request for "+l+" aborted",null,"dataservice.js: timeout");u.interrupt()},1E3*t||25E3);u["finally"](function(){d.cancel(k);k=a.noop;u=f=t=g=e=l=b=null});return u}function n(b,d){if("string"!==typeof b&&"object"!==typeof d)throw c.error("Argumentos no formato errado",null,"dataservice.js: xhr request"),
Error("argumento no formato errado");var n=l.defer(),r=f({method:"get",url:e+b,timeout:n.promise,params:d}),q=r.then(function(b){return b.data},function(b){return l.reject(b)});q.interrupt=function(){n.resolve()};q["finally"](function(){q.interrupt=a.noop;n=r=q=null});return q}return{requestToken:function(c,e){return b({item:"token",username:c,password:e},60)},get:b,post:function(b,c){return f({method:"post",url:e+b,data:c,params:{}})}}}a.module("app.core").factory("dataservice",l);l.$inject=["$q",
"$http","$timeout","logger","dbUrl"]})(window.angular);(function(a,k){a.module("blocks.exception",["blocks.logger"])})(window.angular);(function(a,k){a.module("blocks.exception").factory("exception",["logger",function(a){return{catcher:function(g){return function(f){a.error(g,f)}}}}])})(window.angular);(function(a,k){function l(a){a.decorator("$exceptionHandler",g)}function g(a,d,c){var e=d.config.appErrorPrefix||"";return function(b,d){a(b,d);c.error(e+b.message,{exception:b,cause:d})}}a.module("blocks.exception").provider("exceptionConfig",function(){this.config={};this.$get=function(){return{config:this.config}}}).config(l);l.$inject=["$provide"];g.$inject=["$delegate","exceptionConfig","logger"]})(window.angular);(function(a,k,l){a.module("blocks.logger",[]).value("toastr",k)})(window.angular,window.toastr);(function(a,k){function l(a,f){function d(e,b,d){f.warning(e,d);a.warn("Warning: "+e,c(b))}function c(c){return c||(new Date).toLocaleTimeString()||(new Date).toTimeString()}return{showToasts:!0,error:function(e,b,d){f.error(e,d);a.error("Error: "+e,c(b))},info:function(e,b,d){f.info(e,d);a.info("Info: "+e,c(b))},success:function(e,b,d){f.success(e,d);a.info("Success: "+e,c(b))},warning:d,warn:d,log:a.log}}a.module("blocks.logger").factory("logger",l);l.$inject=["$log","toastr"]})(window.angular);(function(a,k){a.module("encrypt",[])})(window.angular);(function(a,k){a.module("encrypt").factory("cryptojs",["$window",function(a){return a.CryptoJS}])})(window.angular);(function(a,k){a.module("encrypt").factory("encryptService",["cryptojs",function(a){var g=a.AES;return{hash:function(f){return a.SHA3(f).toString()},encrypt:function(a,d){return g.encrypt(a,d).toString()},decrypt:function(a,d){return g.decrypt(a,d)}}}])})(window.angular);(function(a,k){a.module("app.filters",[])})(window.angular);(function(a,k){a.module("app.filters").filter("hashById",function(){return function(a){var g={};a.forEach(function(a){g[a.Id]=a});return g}}).filter("unhashById",function(){return function(a){if(a){var g=[];Object.keys(a).forEach(function(f){g.push(a[f])});return g}}})})(window.angular);(function(a,k){a.module("app.filters").filter("getUnique",function(a){for(var g={},f=[],d=a.length,c=0;c<d;c++)g[a[c]]||(g[a[c]]=!0,f.push(a[c]));return f})})(window.angular);(function(a,k){a.module("app.filters").filter("removeDiacritics",function(){var a={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A",
"\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D",
"\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F",
"\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I",
"\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L",
"\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O",
"\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u0152":"OE","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P",
"\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S",
"\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u1e9e":"SS","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U",
"\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y",
"\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a",
"\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c",
"\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e",
"\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h",
"\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k",
"\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n",
"\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o",
"\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u0153":"oe","\u0276":"oe","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r",
"\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u017f":"s","\u1e9b":"s","\u00df":"ss","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t",
"\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v",
"\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z",
"\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\uff10":"0","\u2080":"0","\u24ea":"0","\u2070":"0","\u00b9":"1","\u2474":"1","\u2081":"1","\u2776":"1","\u24f5":"1","\u2488":"1","\u2460":"1","\uff11":"1","\u00b2":"2","\u2777":"2","\u2475":"2","\uff12":"2","\u2082":"2","\u24f6":"2","\u2461":"2","\u2489":"2","\u00b3":"3","\uff13":"3","\u248a":"3","\u2476":"3","\u2083":"3","\u2778":"3","\u24f7":"3","\u2462":"3","\u24f8":"4",
"\u2463":"4","\u248b":"4","\uff14":"4","\u2074":"4","\u2084":"4","\u2779":"4","\u2477":"4","\u248c":"5","\u2085":"5","\u24f9":"5","\u2478":"5","\u277a":"5","\u2464":"5","\uff15":"5","\u2075":"5","\u2479":"6","\u2076":"6","\uff16":"6","\u277b":"6","\u2086":"6","\u2465":"6","\u24fa":"6","\u248d":"6","\uff17":"7","\u2077":"7","\u277c":"7","\u24fb":"7","\u248e":"7","\u2087":"7","\u247a":"7","\u2466":"7","\u2467":"8","\u248f":"8","\u24fc":"8","\u247b":"8","\u2078":"8","\uff18":"8","\u277d":"8","\u2088":"8",
"\u24fd":"9","\uff19":"9","\u2490":"9","\u277e":"9","\u247c":"9","\u2089":"9","\u2468":"9","\u2079":"9"};return function(g){for(var f=g.split(""),d=f.length-1,c=!1,e;0<=d;d--)e=f[d],a.hasOwnProperty(e)&&(f[d]=a[e],c=!0);c&&(g=f.join(""));return g}}).filter("sortBr",["removeDiacriticsFilter",function(a){return function(g,f,d){g.sort(function(c,e){var b=f===k?a(c).toLowerCase():a(c[f]).toLowerCase(),n=f===k?a(e).toLowerCase():a(e[f]).toLowerCase();return d?b<=n?1:-1:b>=n?1:-1});return g}}])})(window.angular);(function(a,k){a.module("app.filters").filter("duplicates",function(){return function(a,g){var f=[],d=a.filter(function(c,d){return a.indexOf(c)!==d?(f.push(d),!0):!1});return g?f:d}}).filter("removeDuplicates",["duplicatesFilter",function(a){return function(g){a(g,!0).sort(function(a,d){return d-a}).forEach(function(a){g.splice(a,1)});return g}}])})(window.angular);(function(a,k){a.module("app.filters").filter("groupBy",function(){return function(a,g){var f={};a.forEach(function(a){var c=JSON.stringify(g(a));f[c]=f[c]||[];f[c].push(a)});return Object.keys(f).map(function(a){return f[a]})}})})(window.angular);(function(a,k){a.module("app.filters").filter("safellyRemove",function(){return function(a,g){var f=a.indexOf(g);-1<f&&a.splice(f,1);return a}})})(window.angular);(function(a,k){a.module("app.storage",[]).constant("nomeEntidades","atividade atividadeTarefa cenario cenarioValor empresa funcao obra tarefa".split(" ")).constant("abbr",{database:"db",usuarios:"us",levantamentos:"lv",datas:"dt",dados:"dd",atividade:"av",atividadeTarefa:"at",cenario:"cn",cenarioValor:"cv",empresa:"em",funcao:"fc",obra:"ob",tarefa:"tf",recursos:"lr",cenarios:"lc",producao:"lp"}).constant("extenso",{db:"database",us:"usuarios",lv:"levantamentos",dt:"datas",dd:"dados",av:"atividade",
at:"atividadeTarefa",cn:"cenario",cv:"cenarioValor",em:"empresa",fc:"funcao",ob:"obra",tf:"tarefa",lr:"recursos",lc:"cenarios",lp:"producao"}).constant("ordem",{atividade:"AtividadePaiId AtividadesFilhas AtividadesTarefa Cor DataAtualizacao DuracaoMaxima DuracaoMinima Id Nome Status".split(" "),atividadeTarefa:"Atividade AtividadeId DataAtualizacao DataCriacao Id Levantamentos ParticipaQS PercentualQS PercentualQS2 PercentualQS3 Status Tarefa TarefaId".split(" ")})})(window.angular);(function(a,k){a.module("app.storage").factory("Storage",["localStorageService",function(l){var g={},f={cenario:function(d){var c="Id Nome Descricao Obrigatorio UserId Usuario DataCriacao DataAtualizacao Status Valores".split(" ");a.isArray(d);var e=[];Object.keys(d).forEach(function(b){var a=d[b],f=[];Object.keys(a).forEach(function(b){var d=c.indexOf(b);f[d]=a[b]});e.push(f)});return e}};return{get:function(a){if(g[a])return g[a];var c=l.get(a);return"function"===typeof f[a]?f[a](c):c},set:function(a,
c){g[a]=c;var e="function"===typeof f[a]?f[a](c):c;l.set(a,e);return e}}}])})(window.angular);(function(a,k){a.module("app.storage").factory("Sessions",["$q","$timeout","localStorageService","RecursosModel",function(l,g,f,d){function c(b){this.DataInicio=this.Id=b||(new Date).toISOString();return this}function e(a){var c=l.defer(),e=[];a&&0!==a.length||c.resolve();a.forEach(function(a){e.push(b(a))});l.all(e).then(function(a){a=a.filter(function(a){return!!a});c.resolve(a)});return c.promise}function b(a){return a.post().then(function(b){return 200===b.status||500===b.status&&b.data.InnerException&&
b.data.InnerException.InnerException&&b.data.InnerException.InnerException.ExceptionMessage&&0===b.data.InnerException.InnerException.ExceptionMessage.indexOf("Cannot insert duplicate key row in object")?!1:a})}function n(a,b){return{value:a,enumerable:!!b}}var p={restore:function(a){var b=new c(a.Id);b.DataFim=a.DataFim;b.setConfig(a.Config);b.setRecursos(a.Recursos);return b},current:function(){return m},save:function(){m.DataFim=(new Date).toISOString();f.set("sessions",h)}},m=null,h={},r=null;
Object.defineProperties(c.prototype,{updateDataFim:n(function(){var a=this;p.save();g(function(){a.updateDataFim()},9E5);return a}),setConfig:n(function(b){var c={};a.extend(c,b);this.Config=c;return this}),setRecursos:n(function(a){var b=this;if(a&&0!==a.length)return this.Recursos=a.filter(function(a){return a&&0!==Object.keys(a).length?!0:!1}).map(function(a){a=d["new"](a);a.isOpen()&&a.close(new Date(b.DataFim));return a}),this;this.Recursos=[]}),saveConfig:n(function(a){this.Config=a;p.save();
return this}),saveRecursos:n(function(){this.Recursos=a.copy(d.all()).map(function(b){b.Atividade&&(delete b.Atividade,b.Comentarios&&a.isArray(b.Comentarios)&&(b.Comentarios=b.Comentarios.map(function(a){delete a.Membros;return a})));return b});p.save();return this}),endSession:n(function(){var a=l.defer(),b={};b.Recursos=e(this.Recursos);l.all(b).then(function(b){a.resolve(b)});return a.promise}),checkRelevance:n(function(){return this.Recursos&&this.Recursos.length||this.Producao&&this.Producao.length||
this.Cenarios&&this.Cenarios.length?!0:(delete r[this.Id],!1)})});(function(){r=(r=f.get("sessions"))?r:{};var b={};Object.keys(r).forEach(function(a){var c=p.restore(r[a]);b[c.Id]=c.endSession().then(function(b){c.Recursos=b.Recursos;b=c.checkRelevance();d.reset();b?r[a]=c:delete r[a]})});l.all(b)["finally"](function(){a.extend(h,r);p.save()});m=new c;m.updateDataFim();return h[m.Id]=m})();return p}])})(window.angular);(function(a,k){a.module("app.directives",["app.core"])})(window.angular);(function(a,k){a.module("app.directives").directive("formReset",function(){return{restrict:"A",link:function(a,g){console.log(g,g.find("input"));a.$on("form:reset",function(){g.find("input").removeClass("ng-touched").removeClass("ng-dirty");console.log(g,g.find("input"))})}}})})(window.angular);(function(a,k){a.module("app.directives").directive("loader",function(){return{restrict:"AE",replace:!0,template:'<div class="spinner-container"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></div>',
link:function(a,g){g.addClass("ng-hide");a.$on("loader:show",function(){return g.removeClass("ng-hide")});a.$on("loader:hide",function(){return g.addClass("ng-hide")})}}})})(window.angular);(function(a,k){function l(g,f){var d=[];this.collapse={show:!1,toggle:function(){this.show=!this.show;this.execute(this.show)},close:function(){this.show=!1;this.execute()},register:function(a){d.push(a)},unregister:function(c){d=d.map(function(e){return e===c?a.noop:e})},execute:function(a){d.forEach(function(e){e(a,g)})}};f.open&&(this.collapse.show=!0);f.scroll&&(this.scroll=f.scroll);return this}a.module("app.directives").directive("listCollapse",["$rootScope",function(g,f,d){function c(c,b,d){function f(a){"input"===
a.target.nodeName.toLowerCase()?a.preventDefault():(m.toggle(),g.$broadcast(h,b))}var m=c.listCollapse.collapse;d=d.listCollapse;var h="listCollapse:close"+(d?":"+d:d);b.on("click",f);c.$on(h,function(a,c){b!==c&&m.close();return!0});c.$on("scroll",function(c,d,e){b===d&&a.element("body").animate({scrollTop:e-112});return!0});c.$on("$destroy",function(){b.off("click",f);c.listCollapse=null})}return{restrict:"A",compile:function(){return{pre:c}},controller:["$element","$attrs",l],scope:{},controllerAs:"listCollapse",
bindToController:!0}}]).directive("listCollapseItem",["$rootScope","$timeout","Velocity",function(g,f,d){return{restrict:"A",require:"^listCollapse",scope:{},link:function(c,e,b,f){function p(a,b){return a?k(b):t(b)}function m(a){d(e,{width:"100%",opacity:1},{duration:150,queue:!1});d(e,"slideDown",{duration:300,complete:function(){g.$broadcast("scroll",a,e.position().top)}})}function h(){d(e,"slideUp",{duration:250});d(e,{width:0,opacity:0},{duration:150,delay:100,queue:!1})}b="string"!==typeof b.invertItem;
var l=a.element("#"+f.scroll);parseInt(l.css("padding-top"),10);var k=b?m:h,t=b?h:m;f.collapse.register(p);e.css({display:"none"});c.$on("$destroy",function(){f.collapse.unregister(p);l=null})}}}])})(window.angular);(function(a,k){a.module("app.directives").directive("blacklist",function(){return{require:"ngModel",scope:{blacklist:"=",ngModel:"="},link:function(a,g,f,d){var c=a.blacklist;d.$parsers.unshift(function(a){var b=-1===c.indexOf(a);d.$setValidity("blacklist",b);return b?a:k});d.$formatters.unshift(function(a){d.$setValidity("blacklist",-1===c.indexOf(a));return a})}}})})(window.angular);(function(a,k){a.module("app.layout",[])})(window.angular);(function(a,k){a.module("app.layout").controller("Toolbar",["$scope","$state",function(a,g){return this}])})(window.angular);(function(a,k){a.module("app.layout").controller("Configuracao",["$scope","filterFilter","sortBrFilter","dados","ConfigurationService","session",function(l,g,f,d,c,e){function b(a,b){return b?a.filter(function(a){return-1<b.indexOf(a.Id)}):[]}function n(b,c,d){b&&"label"===b.target.tagName.toLowerCase()&&b.preventDefault();h.buttons.ok.disabled=!0;if(!a.equals(h.selected[c],d))return h.selected[c]=d,b=k[c.toLowerCase()](d),b.array&&1===b.array.length&&h.select(null,b.filha,b.array[0]),b.array}function p(a,
c){a&&a.target&&"label"===a.target.tagName.toLowerCase()&&a.preventDefault();q=!0;h.buttons.ok.disabled=!0;var e=g(d.obra,{ObraId:c.Id});h.selected.obras=h.selected.obras||[];var l;h.selected.obras.forEach(function(a,b){a.ObraId===c.ObraId&&(l=b)});"undefined"!==typeof l&&(h.selected.obras.length=l);h.selected.obras.push(c);switch(h.selected.obras.length){case 1:h.selected.Empreendimento=c;m("Obra");m("Fracao","Fracoes");m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");break;case 2:h.selected.Obra=
c;m("Fracao","Fracoes");m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");break;case 3:h.selected.Fracao=c;m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");break;case 4:h.selected.Subfracao=c,m("Contratada"),m("Tarefa")}h.Obras=f(e,"Nome");if(1===e.length)return a&&a.stopPropagation(),p(null,e[0]);if(e.length)return a&&a.stopPropagation(),h.Obras;h.Contratadas=b(d.empresa,c.Contratadas);h.Contratadas=f(h.Contratadas,"RazaoSocial");1===h.Contratadas.length&&n(null,"Contratada",h.Contratadas[0]);
q=!1;return!0}function m(a,b){"Tarefa"===a&&h.selected.Tarefa&&(c.unset(),e.saveConfig(c.full(!0)));b||(b=a+"s");return h[b]=0&delete h.selected[a]}var h=this;l=d.obra.map(function(a){return a.EmpresaId});var k={empresa:function(a){m("Empreendimento");m("Obra");m("Fracao","Fracoes");m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");h.Obras=b(d.obra,a.Obras).filter(function(a){return null===a.ObraId});f(h.Obras,"Nome");return{array:h.Obras,filha:"Obra"}},empreendimento:function(a){m("Obra");
m("Fracao","Fracoes");m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");h.Obras=g(d.obra,{ObraId:a.Id});f(h.Obras,"Nome");return h.Obras.length?{array:h.Obras,filha:"Fracao"}:(h.Contratadas=b(d.empresa,h.selected.Empreendimento.Contratadas),f(h.Contratadas,"RazaoSocial"),{array:h.Contratadas,filha:"Contratada"})},obra:function(a){m("Fracao","Fracoes");m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");h.Fracoes=g(d.obra,{ObraId:a.Id});f(h.Fracoes,"Nome");return h.Fracoes.length?{array:h.Fracoes,
filha:"Subfracao"}:(h.Contratadas=b(d.empresa,h.selected.Obra.Contratadas),f(h.Contratadas,"RazaoSocial"),{array:h.Contratadas,filha:"Contratada"})},fracao:function(a){m("Subfracao","Subfracoes");m("Contratada");m("Tarefa");h.Subfracoes=g(d.obra,{ObraId:a.Id});f(h.Subfracoes,"Nome");return h.Subfracoes.length?{array:h.Subfracoes,filha:"Contratada"}:(h.Contratadas=b(d.empresa,h.selected.Obra.Contratadas),f(h.Contratadas,"RazaoSocial"),{array:h.Contratadas,filha:"Contratada"})},subfracao:function(a){m("Contratada");
m("Tarefa");h.Contratadas=b(d.empresa,h.selected.Obra.Contratadas);f(h.Contratadas,"RazaoSocial");return{array:h.Contratadas,filha:"Contratada"}},contratada:function(a){m("Tarefa");h.Tarefas=b(d.tarefa,h.selected.Contratada.Tarefas);f(h.Tarefas,"Nome");return{array:h.Tarefas,filha:"Tarefa"}},tarefa:function(a){h.buttons.ok.disabled=!1;Object.keys(h.selected).forEach(function(a){c.select(a,h.selected[a])});e.saveConfig(c.full(!0));return{array:[],filha:""}}},q=!1;a.extend(h,{buttons:{ok:{disabled:!0}},
selected:{},select:n,selectObra:p,rebuildLevel:function(a,b){if(!b)return h;q&&a.stopPropagation();h.Obras=f(d.obra.filter(function(a){return a.ObraId===b.ObraId}),"Nome");return h},isSelected:function(a,b){return a&&b&&a===b},Empresas:[],Empreendimentos:[],Obras:[],Fracoes:[],Subfracoes:[],Contratadas:[],Tarefas:[]});h.Empresas=b(d.empresa,l);f(h.Empresas,"RazaoSocial");1===h.Empresas.length&&h.select(null,"Empresa",h.Empresas[0])}])})(window.angular);(function(a,k){a.module("app.layout").controller("equipeController",["funcoes","sortBrFilter","Equipe","safellyRemoveFilter",function(l,g,f,d){function c(){e.showForm=!1;e.trabalhador={Nome:"",experiencia:{tempo:"",unidade:"anos"},Funcao:""};return!0}var e=this;e.funcoes=l;e.trabalhadores=f.all();e.nomes=e.trabalhadores.map(function(a){return a.Nome});a.extend(e,{formulario:function(a){e.showForm=!0;e.trabalhador.Funcao=a;e.trabalhador.Nome=a.Nome+" "+(a.Membros?a.Membros.length+1:1);return!0},adicionar:function(){var a=
{Nome:e.trabalhador.Nome,Funcao:e.trabalhador.Funcao,Experiencia:e.trabalhador.experiencia.tempo};f.add(a);e.nomes.push(a.Nome);c();return a},remover:function(a){f.remove(a);d(e.nomes,a.Nome);return!0},cancelar:c,showExp:function(a){a=12*parseInt(a,10);var c=Math.floor(a/12);a%=12;return(c||a?" \u2022 ":"")+(c?c+(1<c?" anos":" ano"):"")+(c&&a?" e ":" ")+(a?a+(1<a?" meses":" m\u00eas"):"")}});c();return e}])})(window.angular);(function(a,k){a.module("app.layout").controller("recursosController",["$scope","$state","$modal","Equipe","AtividadesService","Levantamentos",function(a,g,f,d,c,e){var b=this;b.Atividades=c.delegaveis().filter(function(a){return a.Membros&&a.Membros.length});b.Equipe=d.all();b.change=function(a,b,c){a.stopPropagation();d.select(b);g.go(c)};b.finalizar=function(a){return e.send(a)};b.openModal=function(){f.open({template:'<div class="modal-header"><h3 class="modal-title">Qual hor\u00e1rio deve ser lan\u00e7ado o fechamento do levantamento?</h3></div><div class="modal-body"><timepicker ng-model="horario" hour-step="1" minute-step="1" show-meridian="ismeridian"></timepicker></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>',
controller:["$scope","$modalInstance","horario",function(a,b,c){a.ok=function(){b.close(a.horario)};a.cancel=function(){b.dismiss("cancel")}}],resolve:{horario:function(){a.horario=new Date;return a.horario}}}).result.then(function(a){b.finalizar(a)},function(){console.info("Modal dismissed at: "+new Date)})};a.horario=null}])})(window.angular);(function(a,k){a.module("app.layout").controller("atividadesController",["$state","filterFilter","sortBrFilter","Equipe","AtividadesService","Levantamentos",function(l,g,f,d,c,e){function b(){p.selecao=f(p.Atividades,"Nome");return p}function n(){d.deselectAll();p.selected.Atividade=[];return!0}var p=this,m=new Date;a.extend(p,{Atividades:c.gerais(),Equipe:d.all(),selected:{Atividade:[],Equipe:d.getSelecionados()},selecao:[],select:function(a,b){"label"===a.target.tagName.toLowerCase()&&a.preventDefault();
if(b.AtividadesFilhas.length)return a.stopPropagation(),p.selecao=b.AtividadesFilhas,p.selected.Atividade.push(b),!0;p.selecao=[];p.selected.Atividade.push(b);return!0},toggle:function(a,b){"label"===a.target.tagName.toLowerCase()&&a.preventDefault();if("input"!==a.target.tagName.toLowerCase())return b.isSelected?d.deselect(b):d.select(b)},reset:n,registrar:function(){var a=p.selected.Atividade.pop();p.selected.Equipe.filter(function(b){return b.Atividade===a}).forEach(function(a){d.deselect(a)});
e.recursos.registrar(p.selected.Equipe,a,m);d.setAtividade(p.selected.Equipe,a);n()},rebuildLevel:function(a){p.selected.Atividade.length=p.selected.Atividade.indexOf(a);if(null===a.AtividadePaiId)return b();p.selecao=f(Recursos.atividades.delegaveis.filter(function(b){return b.AtividadePaiId===a.AtividadePaiId}),"Nome");return p}});b();return p}])})(window.angular);(function(a,k){a.module("app.layout").controller("comentariosController",["$state","$timeout","Equipe","Comentarios","Sessions",function(l,g,f,d,c){function e(){f.deselectAll();b.texto="";return!0}var b=this;a.extend(b,{Equipe:f.all(),selected:{Equipe:f.getSelecionados()},div:[],Texto:"",toggle:function(a,b){"label"===a.target.tagName.toLowerCase()&&a.preventDefault();if("input"!==a.target.tagName.toLowerCase())return b.isSelected?f.deselect(b):f.select(b)},reset:e,gravar:function(){var a=d["new"](b.texto);
b.selected.Equipe.forEach(function(b){b.addComentario(a)});c.current().saveRecursos();e()},showDiv:function(a){b.div[a]=!b.div[a];var c=document.getElementById("comentario_collapse_"+a);g(function(){c.click()},5,!0)}});return b}])})(window.angular);(function(a,k){a.module("app.layout").controller("toolbarController",["$state",function(l){a.extend(this,l.$current.data.toolbar);return this}])})(window.angular);(function(a,k){a.module("app.layout").controller("footerController",["$scope","$state",function(l,g){this.buttons={};a.extend(this.buttons,l.$parent.buttons);var f=g.$current.data.footer.buttons||{},d=this.buttons;Object.keys(f).forEach(function(a){var e=f[a];if(d[a]){var b=d[a];Object.keys(e).forEach(function(a){0!==a.indexOf("$$")&&"undefined"===typeof b[a]&&(b[a]=e[a])})}});return this}])})(window.angular);(function(a,k){a.module("app.auth",[])})(window.angular);(function(a,k){a.module("app.auth").controller("Login",["$scope","$state","authservice","logger","$http",function(a,g,f,d,c){function e(){b.login=b.login||{};b.login.UserName="";b.login.Password=""}var b=this;b.submit=function(){return f.login(b.login).then(function(){d.success("Login realizado com sucesso!",null,"login.js: login");g.go("configuracao")})["catch"](function(a){e();d.warn(a,null,"login.js: login")})};e();return b}])})(window.angular);(function(a,k){a.module("app.auth").factory("authservice",["logger","dataservice","User","localStorageService",function(l,g,f,d){var c,e;function b(){c=!1;e=null}var n="";e=c=void 0;var p={login:function(m){function h(b){c=!0;e||(e="server");var h=f.register(b),g=d.get("users")||[],m=g.filter(function(a){return f.checkId(a)});m.length?a.extend(m[0],h):h.UserId&&0===g.filter(function(a){return a.UserId===h.UserId}).length&&g.push(h);d.set("users",g);return b}n=m.Password;f.register(m);return g.requestToken(f.getName(),
n).then(h)["catch"](function(a){if(a&&500===a.status&&a.data&&"Login falhou"===a.data.ExceptionMessage)throw a=a.data.ExceptionMessage,b(),Error(a);a=(d.get("users")||[]).filter(f.identify);if(1===a.length)return e="local",h(a)})},logout:b,isLogged:function(){return c},loginMethod:function(){return e}};b();l.info("initialized",null,"authservice.js: init");return p}])})(window.angular);(function(a,k){a.module("app.models",[])})(window.angular);(function(a,k){a.module("app.models").factory("Membros",["sortBrFilter","safellyRemoveFilter",function(a,g){function f(a){this.Nome=a.Nome;this.Experiencia=a.Experiencia;this.isSelected=!1;this.setFuncao(a.Funcao);this.setAtividade(a.Atividade);this.setRecurso(null);return this}function d(a,d){return{value:a,enumerable:!!d}}Object.defineProperties(f.prototype,{setFuncao:d(function(c){this.Funcao=c;c.Membros=c.Membros||[];c.Membros.push(this);c.Membros=a(c.Membros,"Nome");return this}),unsetFuncao:d(function(){var a=
this.Funcao;this.Funcao=null;g(this,a.Membros);return this}),setAtividade:d(function(c){this.Atividade=c;c.Membros=c.Membros||[];c.Membros.push(this);c.Membros=a(c.Membros,"Nome");return this}),unsetAtividade:d(function(){var a=this.Atividade;this.Atividade=null;g(a.Membros,this);return this}),changeAtividade:d(function(a){this.Atividade!==a&&(this.unsetAtividade(),this.setAtividade(a));return this}),addComentario:d(function(a){if(!this.Recurso)return this;this.Recurso.addComentario(a);a.addMembro(this);
return this}),removeComentario:d(function(a){if(!this.Recurso)return this;this.Recurso.removeComentario(a);a.removeMembro(this);return this}),removeTodosComentarios:d(function(){this.Comentarios.forEach(function(a){this.removeComentario(a)});return this}),setRecurso:d(function(a){this.Recurso=a}),unsetRecurso:d(function(){this.recurso=null}),select:d(function(){this.isSelected=!0;return this}),deselect:d(function(){this.isSelected=!1;return this}),printRegistros:d(function(){var a="";this.Recurso&&
this.Recurso.Comentarios&&this.Recurso.Comentarios.length&&(a=1===this.Recurso.Comentarios.length?" \u2022 1 coment\u00e1rio":" \u2022 "+this.Recurso.Comentarios.length+" coment\u00e1rios");return this.Funcao.Nome+a}),"delete":d(function(){this.removeAtividade();this.removeFuncao();this.removeTodosComentarios();return this})});return{"new":function(a){return new f(a)}}}])})(window.angular);(function(a,k){a.module("app.models").factory("Comentarios",["sortBrFilter","safellyRemoveFilter",function(l,g){function f(a){this.Id="c_"+ ++c;this.value=a;this.Membros=[];this.setValue(a);this.queue();return this}function d(a,c){return{value:a,enumerable:!!c}}var c=0,e=[];Object.defineProperties(f.prototype,{addMembro:d(function(b){a.isArray(b)?this.Membros=this.Membros.concat(b):this.Membros.push(b);this.Membros=l(this.Membros,"Nome");return this}),removeMembro:d(function(b){b=a.isArray(b)?b:[b];
b.forEach(function(a){g(this.Membros,a)});return this}),setValue:d(function(a){this.value=a;return this}),unsetValue:d(function(){this.value="";return this}),queue:d(function(){e.push(this);return this}),unqueue:d(function(){g(e,this);return this}),printMembros:d(function(){return this.Membros.map(function(a){return a.Nome}).join(", ")}),"delete":d(function(){this.Membros.forEach(function(a){a.removeComentario(this)});this.unsetValue();this.unqueue();return e})});return{all:function(){return e},"new":function(a){return new f(a)}}}])})(window.angular);(function(a,k){a.module("app.services",[])})(window.angular);(function(a,k){function l(g,f,d){function c(){return b.UserName||""}function e(){return b.Password||""}var b={};this.register=function(c){a.isArray(c)&&(c=c[0]);a.extend(b,c);b.Password===c.Password&&(b.Password=c.Password?g.hash(c.Password):"");return b};this.getId=function(){return b.UserId||""};this.getToken=function(){return b.Token||""};this.getName=c;this.getPassword=e;this.getLoginData=function(){return{UserName:c(),Password:e()}};this.getData=function(){return{Empresas:b.Empresas,Obras:b.Obras,
Tarefas:b.Tarefas}};this.identify=function(a){return b.UserName===a.UserName&&b.Password===a.Password};this.checkId=function(a){return b.UserId===a.UserId}}a.module("app.services").service("User",l);l.$inject=["encryptService","dataservice","localStorageService"]})(window.angular);(function(a,k){a.module("app.services").factory("Entidades",["$q","dataservice","localStorageService","hashByIdFilter","unhashByIdFilter","sortBrFilter",function(l,g,f,d,c,e){function b(){function b(c,e){var f=l.defer();g.get(c,{data:e}).then(function(a){return p(a,c)}).then(d).then(function(b){var d=q.dados[c]||{};b=0===Object.keys(b).length?d:a.extend(d,b);return q.dados[c]=b}).then(function(a){k[c]&&delete k[c];a||f.reject("N\u00e3o h\u00e1 dados de "+c);f.resolve(a)})["catch"](function(){f.resolve(q.dados[c])});
return f.promise}var c=l.defer(),e=Object.keys(h),n={},v={};e.forEach(function(a){q.dados[a]=f.get(a)||{};q.datas[a]=f.get(a+"Data")||"2014-01-01T00:00:00"});e.forEach(function(a){n[a]=b(a,q.datas[a]);v[a]=n[a]});l.all(v).then(function(a){e.forEach(function(a){f.set(a,q.dados[a]);f.set(a+"Data",q.datas[a])});return a},function(a){e.forEach(function(a){q.dados[a]=f.get(a)||{};q.datas[a]=f.get(a+"Data")||"2014-01-01T00:00:00"});return q.dados})["finally"](function(){h=q.dados;h.atividade[-1]={Nome:"Aguardando atividade",
Id:-1,Membros:[],AtividadePaiId:null,Cor:"#B0B0BB",DuracaoMinima:0,DuracaoMaxima:0,Status:!0,AtividadesFilhas:[],AtividadesTarefa:[]};m=!0;return c.resolve(h)});return c.promise}function n(a,d,e){if(!m)return b().then(function(){n(a,d)});if(!d||0===d.length)return k[a]||(k[a]=c(h[a])),e?h[a]:k[a];if(e){var f={};d.forEach(function(b){f[b]=h[a][b]});return f}return d.map(function(b){return h[a][b]})}function p(a,b){var c=q.datas[b]||"2014-01-01T00:00:00";a.forEach(function(a){a.DataAtualizacao>c&&(c=
a.DataAtualizacao)});q.datas[b]=c;return a}var m=!1,h={atividade:{},atividadeTarefa:{},cenario:{},cenarioValor:{},empresa:{},funcao:{},obra:{},tarefa:{}},k={},q={dados:{},datas:{}};return{init:b,get:n}}])})(window.angular);(function(a,k){a.module("app.models").factory("ConfigurationService",["$q","Entidades","User",function(a,g,f){function d(){return g.init().then(function(){var a=f.getData();b.empresa=g.get("empresa",a.Empresas);b.obra=g.get("obra",a.Obras);b.tarefa=g.get("tarefa",a.Tarefas);return b})}function c(){return e("Subfracao")||e("Fracao")||e("Obra")||e("Empreendimento")}function e(a,b){return b?n[a]=b:n[a]}var b={empresa:[],obra:[],tarefa:[]},n={};return{get:function(){var b=a.defer();d().then(function(a){b.resolve(a)});
return b.promise},full:function(a){return a?{EmpresaId:e("Empresa").Id,ObraId:c().Id,UsuarioId:f.getId(),TarefaId:e("Tarefa").Id,ContratadaId:e("Contratada").Id}:{Empresa:e("Empresa"),Obra:c(),UsuarioId:f.getId(),Tarefa:e("Tarefa"),Contratada:e("Contratada")}},select:e,unset:function(){n={}},selected:n}}])})(window.angular);(function(a,k){a.module("app.services").factory("Equipe",["Membros","Entidades","sortBrFilter","safellyRemoveFilter",function(l,g,f,d){var c=g.get("atividade",[-1])[0],e=[],b=[];return{add:function(a){a.Atividade=c;e.push(l["new"](a));return e=f(e,"Nome")},remove:function(a){d(e,a);a["delete"]();return e},all:function(){return e},select:function(c){c=a.isArray(c)?c:[c];c.forEach(function(a){b.push(a.select())});return b},deselect:function(c){c=a.isArray(c)?c:[c];c.forEach(function(a){d(b,a.deselect())});
return b},deselectAll:function(){b.forEach(function(a){a.deselect()});return b=[]},getSelecionados:function(){return b},setAtividade:function(c,d){c=a.isArray(c)?c:[c];c.forEach(function(a){a.changeAtividade(d)});return b}}}])})(window.angular);(function(a,k){a.module("app.services").factory("Recursos",["Equipe","Entidades","ConfigurationService","hashByIdFilter","removeDuplicatesFilter",function(a,g,f,d,c){var e={};init();return{atividades:{delegaveis:[],gerais:[],aguardando:null},comentarios:{all:function(){return Object.keys(e).map(function(a){return e[a]})},"new":function(){}}}}])})(window.angular);(function(a,k){a.module("app.services").factory("AtividadesService",["Entidades","ConfigurationService","hashByIdFilter","removeDuplicatesFilter",function(a,g,f,d){function c(b){if(0===b.AtividadesFilhas.length){var c=a.get("atividadeTarefa",b.AtividadesTarefa,!0);b.AtividadeTarefaId=b.AtividadesTarefa.filter(function(a){return c[a].TarefaId===tarefa.Id})[0]}return b}function e(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}var b=[],k=[],p=[];(function(){var f=a.get("atividade",[-1]),
h=g.select("Tarefa"),r=d(h.Atividades),h=a.get("atividade",r),q=a.get("atividade",r,!0);h.forEach(function(a){a.Nome=e(a.Nome);a.AtividadesFilhas.map(function(a){return q[a]}).filter(function(a){return a}).forEach(c)});r=d(h.map(function(a){return a.AtividadePaiId}));r=a.get("atividade",r).map(function(a){a.Nome=e(a.Nome);return a});r.forEach(function(a){a.AtividadesFilhas=a.AtividadesFilhas.map(function(a){return q[a]}).filter(function(a){return a})});b=f.concat(r).concat(h);k=b.filter(function(a){return 0===
a.AtividadesFilhas.length});p=b.filter(function(a){return null===a.AtividadePaiId});return!0})();return{all:function(){return b},delegaveis:function(){return k},gerais:function(){return p}}}])})(window.angular);(function(a,k){a.module("app.levantamentos",[])})(window.angular);(function(a,k){a.module("app.levantamentos").factory("Levantamentos",["$q","groupByFilter","RecursosLev","Sessions","logger",function(a,g,f,d,c){return{recursos:{registrar:function(a,b,c){var g=a.map(function(a){return f.close(a.Recurso,c)});a.forEach(function(a){a.Recurso=null});b&&-1<b.Id&&a.forEach(function(a,d){a.Recurso="boolean"!==typeof g[d]?f.open(a,b,g[d]):f.open(a,b,new Date(c.getTime()+1E3))});d.current().saveRecursos();return a}},cenarios:{},producao:{},send:function(e){var b=a.defer();
e={recursos:f.send(e)};a.all(e).then(function(){d.current().saveRecursos();c.info("levantamentos salvos",null,"levantamentos.js: send")});return b.promise}}}])})(window.angular);(function(a,k){a.module("app.levantamentos").factory("RecursosLev",["$q","ConfigurationService","User","Entidades","RecursosModel",function(k,g,f,d,c){function e(a){if(n[a.Id])return n[a.Id];var c=d.get("atividadeTarefa",a.AtividadesTarefa,!0),e=a.AtividadesTarefa.filter(function(a){return c[a].TarefaId===b.Tarefa.Id})[0];return n[a.Id]=e}var b={},n={};a.extend(b,g.full());return{open:function(a,d,f){f=f.toISOString();a={AtividadeTarefaId:e(d),EmpresaId:b.Empresa.Id,ObraId:b.Obra.Id,UserId:b.UsuarioId,
Atividade:d,TarefaId:b.Tarefa.Id,ContratadaId:b.Contratada.Id,FuncaoId:a.Funcao.Id,Inicio:f,DataCriacao:f,Colaboradores:a.Nome,QuantidadeColaboradores:1,Comentarios:[],status:"open"};return c["new"](a)},close:function(a,b){if(!a)return!0;var c=0===a.Atividade.DuracaoMinima?3E4:1E3*a.Atividade.DuracaoMinima,d=0===a.Atividade.DuracaoMaxima?Number.POSITIVE_INFINITY:1E3*a.Atividade.DuracaoMaxima;if(b-a.toDate()<c)return a.toDate();if(b-a.toDate()>d)return c=new Date(a.toDate().getTime()+1E3*d),a.close(c),
newDate(c.getTime()+1E3);a.close(b);return!0},send:function(a){var b=k.defer(),d={},e=c.all();e.forEach(function(b){b.isOpen()&&b.close(a)});e.forEach(function(a){d[a.Id]=a.post()});k.all(d).then(function(a){return b.resolve(a)})["catch"](function(a){return b.reject(a)});return b.promise}}}])})(window.angular);(function(a,k){a.module("app.levantamentos").factory("RecursosModel",["dataservice","safellyRemoveFilter",function(a,g){function f(a){this.AtividadeTarefaId=a.AtividadeTarefaId;this.EmpresaId=a.EmpresaId;this.ObraId=a.ObraId;this.UserId=a.UserId;this.Atividade=a.Atividade;this.TarefaId=a.TarefaId;this.ContratadaId=a.ContratadaId;this.FuncaoId=a.FuncaoId;this.Inicio=a.Inicio;this.DataCriacao=a.DataCriacao;this.Colaboradores=a.Colaboradores;this.QuantidadeColaboradores=a.QuantidadeColaboradores;this.Comentarios=
a.Comentarios;this.status=a.status;this.Fim=a.Fim||null;this.DataAtualizacao=a.Fim||null;this.Id=a.Id||this.Inicio+this.FuncaoId+this.Colaboradores;this.queue();return this}var d={};Object.defineProperties(f.prototype,{identify:{value:function(){return this.Inicio+this.FuncaoId+this.Comentarios.toString()},enumerable:!1},close:{value:function(a){a=a.toISOString();this.unqueue();var e=this.Inicio+a+this.FuncaoId+this.comentariosId();d[e]?(d[e].QuantidadeColaboradores+=1,d[e].Colaboradores=d[e].Colaboradores+
", "+this.Colaboradores):(this.Id=e,this.Comentarios=this.comentariosToString(),this.DataAtualizacao=this.Fim=a,this.status="closed",this.queue());return d[e]},enumerable:!1},queue:{value:function(){d[this.Id]=this;return this},enumerable:!1},unqueue:{value:function(){delete d[this.Id];return this},enumerable:!1},toDate:{value:function(a){return a?new Date(this[a]):new Date(this.Inicio)},enumerable:!1},isOpen:{value:function(){return"open"===this.status?!0:!1},enumerable:!1},post:{value:function(){var c=
this;return a.post("levantamento",{AtividadeTarefaId:this.AtividadeTarefaId,EmpresaId:this.ContratadaId,ObraId:this.ObraId,UserId:this.UserId,TarefaId:this.TarefaId,FuncaoId:this.FuncaoId,Inicio:this.Inicio,DataCriacao:this.DataCriacao,Colaboradores:this.Colaboradores,QuantidadeColaboradores:this.QuantidadeColaboradores,Comentario:this.Comentarios,Fim:this.Fim,DataAtualizacao:this.DataAtualizacao}).then(function(a){200===a.status&&c.unqueue();500===a.status&&a.data.InnerException&&a.data.InnerException.InnerException&&
a.data.InnerException.InnerException.ExceptionMessage&&0===a.data.InnerException.InnerException.ExceptionMessage.indexof("Cannot insert duplicate key row in object")&&c.unqueue();return a},function(a){return a})},enumerable:!1},addComentario:{value:function(a){this.Comentarios.push(a);return this},enumerable:!1},removeComentario:{value:function(a){g(this.Comentarios,a);return this},enumerable:!1},comentariosId:{value:function(){return this.Comentarios.map(function(a){return a.Id}).toString()},enumerable:!1},
comentariosToString:{value:function(){return this.Comentarios.map(function(a){return a.value}).join(" | ")},enumerable:!1}});return{"new":function(a){return new f(a)},all:function(){return Object.keys(d).map(function(a){return d[a]})},reset:function(){d=[]}}}])})(window.angular);